{% extends 'admin/model/list.html' %}

{% block model_list_table %}
<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover model-list">
    <thead>
      <tr>
        {% if actions %}
        <th class="list-checkbox-column">
          <input type="checkbox" name="rowtoggle" class="action-rowtoggle"
                 title="{{ _gettext('Select all records') }}" />
        </th>
        {% endif %}
        {% block list_row_actions_header %}
          {% if admin_view.column_display_actions %}
          <th class="">&nbsp;</th>
          {% endif %}
        {% endblock %}
        {% for c, name in list_columns %}
        {% set column = loop.index0 %}
        <th class="column-header col-{{ c }}">
          {% if admin_view.is_sortable(c) %}
            {% if sort_column == column %}
              <a href="{{ sort_url(column, True) }}" title="{{ _gettext('Sort by %(name)s', name=name) }}">
                {{ name }}
                {% if sort_desc %}
                  <span class="fa fa-chevron-up glyphicon glyphicon-chevron-up"></span>
                {% else %}
                  <span class="fa fa-chevron-down glyphicon glyphicon-chevron-down"></span>
                {% endif %}
              </a>
            {% else %}
              <a href="{{ sort_url(column) }}" title="{{ _gettext('Sort by %(name)s', name=name) }}">{{ name }}</a>
            {% endif %}
          {% else %}
            {{ name }}
          {% endif %}
        </th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in data %}
      <tr>
        {% if actions %}
        <td>
          <input type="checkbox" name="rowid" class="action-checkbox"
                 value="{{ get_pk_value(row) }}" title="{{ _gettext('Select record') }}" />
        </td>
        {% endif %}
        {% block list_row_actions_column scoped %}
          {% if admin_view.column_display_actions %}
          <td class="list-buttons-column">
            {% block list_row_actions scoped %}
              {% for row_action in list_row_actions %}
              {{ row_action.render_ctx(get_pk_value(row), row) }}
              {% endfor %}
            {% endblock %}
          </td>
          {% endif %}
        {% endblock %}
        {% for c, name in list_columns %}
        <td class="col-{{ c }}">
          {% if c == 'state' %}
            {% if row.state == 'succeeded' %}
              <span class="badge badge-success">{{ row.state }}</span>
            {% elif row.state == 'failed' %}
              <span class="badge badge-danger">{{ row.state }}</span>
            {% elif row.state == 'cancelled' %}
              <span class="badge badge-dark">{{ row.state }}</span>
            {% elif row.state == 'refunded' %}
              <span class="badge badge-warning">{{ row.state }}</span>
            {% elif row.state == 'processing' %}
              <span class="badge badge-info">{{ row.state }}</span>
            {% else %}
              <span class="badge badge-secondary">{{ row.state }}</span>
            {% endif %}
          {% elif c == 'session_id' %}
            <small>{{ row.session_id }}</small>
          {% else %}
            {{ row[c] }}
          {% endif %}
        </td>
        {% endfor %}
      </tr>
      {% else %}
      <tr>
        <td colspan="{{ list_columns|length + (1 if actions else 0) + (1 if admin_view.column_display_actions else 0) }}">
          <div class="text-center">{{ admin_view.get_empty_list_message() }}</div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
